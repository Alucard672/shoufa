# 纱线收发加工小程序 PRD

## 一、项目背景

在纺织服装加工过程中，纱线外发加工普遍存在以下问题：
- 纱线按公斤发出，但回货按件/打统计，人工换算复杂、易出错
- 无法清晰掌握各加工厂当前剩余纱线数量
- 加工费、回货数量、用料情况分散，月底对账困难
- 缺乏系统化的历史数据统计与分析

本项目目标是开发一套 **纱线收发加工管理小程序**，实现从建款、发纱、回货、计件、结算到统计分析的完整闭环。

---

## 二、项目目标

### 1. 核心目标
- 准确记录纱线发放、使用、剩余情况
- 自动完成重量（kg）、件数、打数之间的换算
- 自动生成加工费与加工厂应付账款
- 提供清晰可追溯的统计报表

### 2. 使用对象
- 工厂内部：仓库、生产计划、财务
- 外发加工管理人员
- 工厂负责人 / 老板

---

## 三、核心业务规则

1. 纱线库存统一单位：**公斤（kg）**
2. 成品计量单位：
   - 1 打 = 12 件（固定规则）
3. 单件纱线用量：
   - 以“克（g）”为单位，在款号中定义
4. 所有用纱量必须由系统自动计算，不允许人工填写

---

## 四、功能模块说明

### 4.1 款号管理

#### 功能说明
建立生产款号及其用料规则，是所有计算的基础数据。

#### 字段定义
- 款号编号（唯一）
- 款号名称
- 单件纱线用量（克）
- 可选颜色（多选）
- 可选尺码（多选）
- 备注

---

### 4.2 加工厂管理

#### 功能说明
维护外发加工厂基础信息及加工单价。

#### 字段定义
- 加工厂名称
- 联系人
- 联系方式
- 默认加工单价（元 / 打）
- 结算方式（次结 / 月结）
- 备注

---

### 4.3 纱线库存管理

#### 功能说明
管理工厂纱线库存及库存变化记录。

#### 字段定义
- 纱线名称 / 批次
- 颜色（可选）
- 当前库存数量（kg）
- 备注

---

### 4.4 生产计划单

#### 功能说明
创建生产计划，明确款号、数量及预计用料。

#### 字段定义
- 计划单号
- 款号
- 颜色
- 尺码
- 计划数量（件）
- 计划加工厂
- 计划日期

#### 系统自动计算
- 计划用纱量（kg） = 计划件数 × 单件用量（克） ÷ 1000

---

### 4.5 纱线发料（外发）

#### 功能说明
记录纱线按公斤发给加工厂的行为。

#### 字段定义
- 发料单号
- 加工厂
- 款号
- 颜色
- 发料重量（kg）
- 发料日期
- 关联生产计划单

#### 系统行为
- 扣减纱线库存
- 增加工厂在厂纱线余额

---

### 4.6 加工厂回货

#### 功能说明
记录加工厂回货数量，按“打”为单位。

#### 字段定义
- 回货单号
- 加工厂
- 款号
- 回货数量（打）
- 回货日期

#### 系统自动计算
- 回货件数 = 回货打数 × 12
- 实际用纱量（kg） = 回货件数 × 单件用量（克） ÷ 1000

---

### 4.7 加工厂纱线余额计算

#### 规则说明

加工厂剩余纱线（kg） =
- 累计发料重量
- 减：累计实际用纱量

该数据用于判断是否存在超用、少用或异常情况。

---

### 4.8 加工费与账款管理

#### 功能说明
基于回货数量自动生成加工费账款。

#### 计算规则
- 加工费 = 回货打数 × 加工单价

#### 账款状态
- 未结算
- 已结算
- 部分结算

---

## 五、统计与报表模块

### 5.1 加工厂往来统计表

展示维度：
- 时间
- 加工厂
- 款号
- 发纱数量（kg）
- 实际用纱（kg）
- 剩余纱线（kg）
- 回货数量（打 / 件）

---

### 5.2 单加工厂明细账

包含内容：
- 发料记录
- 回货记录
- 剩余纱线变化
- 加工费累计
- 已结 / 未结金额

---

### 5.3 款号用料分析表

| 款号 | 计划用量（kg） | 实际用量（kg） | 差异 |
|----|----|----|----|

用于分析损耗、异常用料。

---

## 六、权限与角色（建议）

- 管理员：所有权限
- 仓库人员：库存、发料
- 生产人员：计划单、回货
- 财务人员：账款、结算、报表

---

## 七、非功能性需求

- 数据可追溯，所有单据支持关联查看
- 支持按时间、加工厂、款号筛选
- 关键数据需防止误删（软删除）
- 适配微信小程序使用场景

---

## 八、后续扩展方向（预留）

- 多纱线、多配比支持
- 加工厂端小程序（查看在厂纱线、回货录入）
- 成本核算与毛利分析
- SaaS 多租户模式

---

> 本 PRD 用于指导产品设计与 Figma 原型制作，具体交互与页面布局由原型阶段进一步细化。

