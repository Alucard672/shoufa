# 页面代码迁移状态

## ✅ 已完成迁移的页面（6个）

1. **pages/index/index.js** - 首页
   - ✅ 统计查询（工厂数、款号数、未结账款）
   - ✅ 最近动态查询
   - ✅ 批量查询工厂和款号

2. **pages/factory/index.js** - 工厂列表
   - ✅ 工厂统计查询
   - ✅ 工厂列表查询
   - ✅ 工厂统计数据计算

3. **pages/issue/index.js** - 发料页面
   - ✅ 发料单统计查询
   - ✅ 发料单列表查询
   - ✅ 批量查询工厂、款号、回货单
   - ✅ 完成发料单功能

4. **pages/return/index.js** - 回货页面
   - ✅ 回货单统计查询
   - ✅ 回货单列表查询
   - ✅ 批量查询工厂、款号、发料单

5. **pages/factory/settlement.js** - 结算页面
   - ✅ 工厂信息查询
   - ✅ 回货单查询（IN查询）
   - ✅ 结算单查询
   - ✅ 创建结算单
   - ✅ 更新回货单结算状态

6. **pages/factory/detail.js** - 工厂详情
   - ✅ 工厂信息查询
   - ✅ 发料单、回货单、结算单查询
   - ✅ 批量查询款号信息

7. **pages/factory/create.js** - 创建工厂
   - ✅ 工厂信息查询（编辑模式）
   - ✅ 创建/更新工厂

## ⏳ 待迁移页面（13个）

### 高优先级（核心功能）

1. **pages/issue/create.js** - 创建发料单
   - 需要迁移：工厂列表查询、款号列表查询、颜色字典查询、创建发料单

2. **pages/issue/all.js** - 发料全部页面
   - 需要迁移：与 `pages/issue/index.js` 类似的查询逻辑

3. **pages/return/create.js** - 创建回货单
   - 需要迁移：发料单查询、工厂查询、款号查询、颜色/尺码字典查询、创建回货单

4. **pages/style/index.js** - 款号列表
   - 需要迁移：款号列表查询

5. **pages/style/create.js** - 创建款号
   - 需要迁移：颜色/尺码字典查询、纱线查询、创建/更新款号

### 中优先级

6. **pages/statistics/index.js** - 统计页面
   - 需要迁移：发料单查询、回货单查询、统计计算

7. **pages/yarn/index.js** - 纱线列表
   - 需要迁移：纱线列表查询

8. **pages/yarn/create.js** - 创建纱线
   - 需要迁移：颜色字典查询、创建/更新纱线

9. **pages/plan/index.js** - 计划列表
   - 需要迁移：计划单查询、关联查询工厂和款号

10. **pages/plan/create.js** - 创建计划
    - 需要迁移：工厂查询、款号查询、创建/更新计划

### 低优先级（设置页面）

11. **pages/settings/color.js** - 颜色设置
    - 需要迁移：颜色字典查询、创建/更新/删除颜色

12. **pages/settings/size.js** - 尺码设置
    - 需要迁移：尺码字典查询、创建/更新/删除尺码

13. **pages/index/activities.js** - 活动页面
    - 需要迁移：发料单和回货单查询、批量查询工厂和款号

## 迁移进度统计

- **已完成**: 7个页面（35%）
- **待完成**: 13个页面（65%）

## 下一步计划

1. 优先迁移核心功能页面（创建发料单、创建回货单、款号管理）
2. 然后迁移统计和列表页面
3. 最后迁移设置页面

## 注意事项

1. **字段命名转换**：所有页面都需要处理驼峰/下划线命名转换
2. **ID字段处理**：查询时使用 `id`，结果中使用 `_id` 或 `id`
3. **批量查询**：使用 `queryByIds` 函数进行批量查询
4. **IN查询**：使用数组形式传递，如 `{ settlement_status: ['未结算', '部分结算'] }`
5. **搜索功能**：如果MySQL不支持LIKE查询，需要在客户端过滤

